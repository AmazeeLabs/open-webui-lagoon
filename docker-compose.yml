services:
  openwebui:
    build:
      context: .
      dockerfile: Dockerfile
    environment:
      OPENAI_API_KEY: sk-asdf
      OPENAI_API_BASE_URL: https://litellm.amazeeai-us2.amazeeio.review
      RAG_OPENAI_API_KEY: sk-asdf
      RAG_OPENAI_API_BASE_URL: https://litellm.amazeeai-us2.amazeeio.review
      DEFAULT_MODELS: claude-3-5-sonnet
      PGVECTOR_DB_URL: postgresql://username:password@host/db
      WEBUI_SECRET_KEY: replace-with-random-string
    ports:
      - "3000:8080"
    user: "10000"
    volumes:
      - ./data:/app/backend/data
    labels:
      lagoon.type: python-persistent
      lagoon.persistent: /app/backend/data


  mcpo:
    build:
      context: mcpo
      dockerfile: Dockerfile
    user: "10000"
    ports:
      - "8000:3000"      
    labels:
      lagoon.type: basic
      lagoon.autogeneratedroute: false